type Student @model @auth(rules: [{ allow: public }]) {
  id: ID!
  name: String!
  email: String
  enrollmentNumber: String!
  createdAt: AWSDateTime
  attendanceRecords: [AttendanceRecord] @hasMany(indexName: "byStudent", fields: ["id"])
}

type AttendanceRecord @model @auth(rules: [{ allow: public }]) {
  id: ID!
  studentID: ID! @index(name: "byStudent")
  student: Student @belongsTo(fields: ["studentID"])
  timestamp: AWSDateTime!
  status: AttendanceStatus!
  location: String
  confidence: Float
  createdAt: AWSDateTime
}

type Alert @model @auth(rules: [{ allow: public }]) {
  id: ID!
  message: String!
  timestamp: AWSDateTime!
  alertType: AlertType!
  location: String
  imageUrl: String
  acknowledged: Boolean!
  createdAt: AWSDateTime
}

enum AttendanceStatus {
  PRESENT
  LATE
  ABSENT
}

enum AlertType {
  UNKNOWN_FACE
  SYSTEM_ERROR
  MULTIPLE_DETECTION
}